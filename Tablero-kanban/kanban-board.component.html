<div class="kanban-container">
  <h1>Tablero Kanban</h1>

  <div class="form-container">
    <mat-form-field appearance="outline">
      <mat-label>Título</mat-label>
      <input matInput [(ngModel)]="nuevoTitulo" placeholder="Título de la tarea" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Descripción</mat-label>
      <textarea matInput [(ngModel)]="nuevaDescripcion" placeholder="Descripción de la tarea"></textarea>
    </mat-form-field>

    <button mat-raised-button color="primary" (click)="agregarTarea()">Añadir tarea</button>
  </div>

  <div class="board">
    <div class="column" cdkDropList id="todoList" [cdkDropListData]="todo" (cdkDropListDropped)="drop($event)">
      <h2>To Do ({{todo.length}})</h2>
      <div class="task" *ngFor="let t of todo" cdkDrag>
        <h3>{{t.titulo}}</h3>
        <button mat-stroked-button (click)="t.mostrarDesc = !t.mostrarDesc">Ver descripción</button>
        <div *ngIf="t.mostrarDesc" class="descripcion">{{t.descripcion}}</div>
        <button mat-icon-button color="warn" (click)="eliminarTarea(todo, t)">
          <mat-icon>delete</mat-icon>
        </button>
      </div>
    </div>

    <div class="column" cdkDropList id="doingList" [cdkDropListData]="doing" (cdkDropListDropped)="drop($event)">
      <h2>Doing ({{doing.length}})</h2>
      <div class="task" *ngFor="let t of doing" cdkDrag>
        <h3>{{t.titulo}}</h3>
        <button mat-stroked-button (click)="t.mostrarDesc = !t.mostrarDesc">Ver descripción</button>
        <div *ngIf="t.mostrarDesc" class="descripcion">{{t.descripcion}}</div>
        <button mat-icon-button color="warn" (click)="eliminarTarea(doing, t)">
          <mat-icon>delete</mat-icon>
        </button>
      </div>
    </div>

    <div class="column" cdkDropList id="doneList" [cdkDropListData]="done" (cdkDropListDropped)="drop($event)">
      <h2>Done ({{done.length}})</h2>
      <div class="task" *ngFor="let t of done" cdkDrag>
        <h3>{{t.titulo}}</h3>
        <button mat-stroked-button (click)="t.mostrarDesc = !t.mostrarDesc">Ver descripción</button>
        <div *ngIf="t.mostrarDesc" class="descripcion">{{t.descripcion}}</div>
        <button mat-icon-button color="warn" (click)="eliminarTarea(done, t)">
          <mat-icon>delete</mat-icon>
        </button>
      </div>
    </div>
  </div>
</div>
